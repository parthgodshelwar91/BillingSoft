@model ProBillInvoice.CRM_SaleQuotationModel

@{
    Layout = null;


}

<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>SaleQuotationEmailReport</title>
</head>
<body>
    <div>
        <p>nspire technology</p>
    </div>
    <div class="main-card">
        @{
            int SrNo = 0;
            decimal cgstamt = 0;
            decimal sgstamt = 0;
            decimal igstamt = 0;
            decimal Subtotal = 0;
        }
        <div class="card-layout">
            <div class="row">
                <div class="col-9" style="width:100%; margin: 0 auto; overflow: auto; max-width: 820px;">
                    <div class="card">
                        <div style="width: 21cm !important; display: flex; justify-content: center; align-items: center; margin: 0 auto;">
                            <div id="printable">
                                <div class="card-body pb-0" style="min-height: 700px; padding: 0px; font-size: 14px;">
                                    <div class="row p-4">
                                        <div class="col-12">
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-12" style=" border-top:1px solid black; border-left:1px solid black; border-right:1px solid black ">
                                                        <div>
                                                            @Html.HiddenFor(model => model.SaleQuotationHeaderSearch.PartyId)
                                                            @Html.HiddenFor(model => model.SaleQuotationHeaderSearch.sale_quotation_header_id)
                                                        </div>
                                                        <div class="row mb-1">
                                                            <div class="col-2" style="text-align:center;padding:10px">
                                                                <img src="~/assets/images/rmcsoftware72.png" alt="RMC Software (Ready Mix Concrete)" title="Stamp" height="70">
                                                            </div>
                                                            <div class="col-6">
                                                                <span style="font-size:22px; padding-top: 12px; text-align:left;">@Html.DisplayFor(model => model.Company.company_name)</span><br />
                                                                <span>@Html.DisplayFor(model => model.Company.work_Address)</span><br />
                                                                <span>@Html.DisplayFor(model => model.Company.work_Address2)</span><br />
                                                                <div style="text-align: left;">
                                                                    @Html.Label("AT.POST :- ", new { @class = "col-form-label", @style = "padding: 0px;" })
                                                                    @Html.DisplayFor(model => Model.Company.city_name) @Html.DisplayFor(model => Model.Company.state_Name) @Html.DisplayFor(model => Model.Company.zip_code)  @Html.DisplayFor(model => Model.Company.country_name)
                                                                    <br />
                                                                    @Html.Label("GSTIN :-", htmlAttributes: new { @class = "col-form-label", @style = "padding: 0px;" })
                                                                    @Html.DisplayFor(model => Model.Company.gst_no, new { @class = "col-form-label", @style = "padding: 0px;" })
                                                                </div>
                                                            </div>
                                                            <div class="col-4">
                                                                <h5 class="card-title mb-0" style="font-size:28px; padding-top: 12px; margin-top:70px; text-align:right;">Sale Quotation</h5>
                                                            </div>
                                                        </div>

                                                        <div class="row" style="border-top:1px solid black ;">
                                                            <div class="col-6" style="padding-top:5px; padding-bottom:5px; border-right:1px solid black;">
                                                                <div class="row">
                                                                    <div class="col-4">
                                                                        Quotation No :
                                                                    </div>
                                                                    <div class="col-8">
                                                                        <span style="font-weight:bold;">@Html.DisplayFor(model => model.SaleQuotationHeaderSearch.quotation_no)</span>
                                                                    </div>
                                                                </div>

                                                                <div class="row">
                                                                    <div class="col-4">
                                                                        Quotation Date:
                                                                    </div>
                                                                    <div class="col-8">
                                                                        @if (Model.SaleQuotationHeaderSearch != null)
                                                                        {
                                                                            <span style="font-weight:bold;">
                                                                                @string.Format("{0:dd/MM/yyyy}", Model.SaleQuotationHeaderSearch.quotation_date)
                                                                            </span>
                                                                        }
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-6" style="padding-top:5px;">
                                                                <div class="row">
                                                                    <div class="col-12">
                                                                        Place of Supply :  <span style="font-weight:bold;">@Html.DisplayFor(model => model.StateMst.state_name)</span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="row">
                                                            <div class="col-6" style="border-right:1px solid black; padding-bottom: 10px;">
                                                                <div class="row">
                                                                    <div class="col-12 bgrpt" style="border-top:1px solid black; border-bottom:1px solid black; font-weight: bold;">
                                                                        Bill To
                                                                    </div>
                                                                    <div class="col-12" style="padding-top:5px;">
                                                                        <span style="font-weight:bold;"> @Html.DisplayFor(model => model.PartyMasterSearch.party_name)</span>
                                                                    </div>
                                                                    <div class="col-12">
                                                                        <span>@Html.DisplayFor(model => model.PartyMasterSearch.billing_address)</span>
                                                                    </div>
                                                                    <div class="col-12">
                                                                        <span>@Html.DisplayFor(model => model.PartyMasterSearch.city_name) @Html.DisplayFor(model => model.PartyMasterSearch.pin_no) @Html.DisplayFor(model => model.PartyMasterSearch.state_name)</span><br />
                                                                        <span>
                                                                            India
                                                                        </span><br />
                                                                    </div>
                                                                    <div class="col-12">
                                                                        GSTIN  <span>@Html.DisplayFor(model => model.PartyMasterSearch.gst_no)</span>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <div class="col-6" style="padding-bottom: 10px;">
                                                                <div class="row">
                                                                    <div class="col-12" style="border-top:1px solid black; border-bottom:1px solid black; font-weight: bold;">
                                                                        Ship To
                                                                    </div>
                                                                    <div class="col-12" style="padding-top:5px;">
                                                                        <span style="font-weight:bold;">@Html.DisplayFor(model => model.PartyMasterSearch.party_name)</span>
                                                                    </div>
                                                                    <div class="col-12">
                                                                        <span>@Html.DisplayFor(model => model.PartyMasterSearch.delivery_address)</span>
                                                                    </div>
                                                                    <div class="col-12">
                                                                        <span>@Html.DisplayFor(model => model.PartyMasterSearch.city_name) @Html.DisplayFor(model => model.PartyMasterSearch.pin_no) @Html.DisplayFor(model => model.PartyMasterSearch.state_name)</span><br />
                                                                        <span>India </span><br />
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    <div class="col-12" style="min-height:0px; padding: 0px; font-size: 12px;">
                                                        <style>
                                                            .table_css th {
                                                                padding: 5px 5px;
                                                            }

                                                            .table_css td {
                                                                padding: 5px 5px;
                                                            }
                                                        </style>

                                                        <table id="SaleQuotation" class="table table-bordered table-hover table_css" style="border: 1px; margin-bottom: 0px;">
                                                            <thead style="border: 1px;">
                                                                <tr style="text-align: center; font-weight: bold;">
                                                                    <th rowspan="2">SN</th>
                                                                    <th rowspan="2">Material Name</th>
                                                                    <th rowspan="2">Net Wt</th>
                                                                    <th rowspan="2">Qty In CFT</th>
                                                                    <th rowspan="2">Item Qty</th>
                                                                    <th rowspan="2">Rate</th>
                                                                    <th rowspan="2">Disc (%)</th>
                                                                    <th rowspan="2">Sub Total</th>
                                                                    <th colspan="2">Cgst(%)</th>
                                                                    <th colspan="2">Sgst(%)</th>
                                                                    <th colspan="2">Igst(%)</th>
                                                                    <th rowspan="2">Amount (Rs)</th>
                                                                </tr>
                                                                <tr style="text-align: center; font-weight: bold;">
                                                                    <th id="cgst">%</th>
                                                                    <th id="cgstamt">Amt</th>
                                                                    <th id="sgst">%</th>
                                                                    <th id="sgstamt">Amt</th>
                                                                    <th id="igst">%</th>
                                                                    <th id="igstamt">Amt</th>
                                                                </tr>
                                                            </thead>

                                                            @if (Model.SaleQuotationDetail != null)
                                                            {
                                                                foreach (var item in Model.SaleQuotationDetail)
                                                                {
                                                                    SrNo = SrNo + 1;
                                                                    <tr style="font-size: 12px;">
                                                                        <td style="text-align:center; width: 3%;">@SrNo</td>
                                                                        <td style="width: 30%;">@Html.DisplayFor(x => item.material_name) <br /> @Html.DisplayFor(x => item.material_desc)</td>
                                                                        <td style="text-align:center; width: 5%;">@Html.DisplayFor(x => item.net_weight)</td>
                                                                        <td style="text-align:right; width: 6%;">@Html.DisplayFor(x => item.qty_in_cft)</td>
                                                                        <td style="text-align:right; width: 6%;">@Html.DisplayFor(x => item.item_qty)<br /> @Html.DisplayFor(x => item.short_desc)</td>
                                                                        <td style="text-align:right; width: 5%;">@Html.DisplayFor(x => item.item_rate)</td>
                                                                        <td style="text-align:right; width: 5%;">@Html.DisplayFor(x => item.disc)</td>
                                                                        <td style="text-align:right; width: 5%;">@Html.DisplayFor(x => item.sub_total)</td>
                                                                        <td style="text-align:right; width: 5%;">@Html.DisplayFor(x => item.cgst)</td>
                                                                        <td style="text-align:right; width: 5%; word-wrap: break-word;">@string.Format("{0:f2}", item.cgst_amt)</td>
                                                                        <td style="text-align:right; width: 5%;">@Html.DisplayFor(x => item.sgst)</td>
                                                                        <td style="text-align:right; width: 5%; word-wrap: break-word;">@string.Format("{0:f2}", item.sgst_amt)</td>
                                                                        <td style="text-align:right; width: 5%;">@Html.DisplayFor(x => item.igst)</td>
                                                                        <td style="text-align:right; width: 5%; word-wrap: break-word;">@string.Format("{0:f2}", item.igst_amt)</td>
                                                                        <td style="text-align:right; width: 10%;">@string.Format("{0:N2}", item.item_value)</td>
                                                                    </tr>
                                                                    cgstamt = cgstamt + item.cgst_amt;
                                                                    sgstamt = sgstamt + item.sgst_amt;
                                                                    igstamt = igstamt + item.igst_amt;
                                                                    Subtotal = Subtotal + item.sub_total;
                                                                }
                                                            }
                                                        </table>
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    <div class="col-12" style=" border-bottom:1px solid black; border-left:1px solid black; border-right:1px solid black ">

                                                        <div class="row mb-1">
                                                            <div class="col-7" style="padding-top:10px;">
                                                                <div class="row">
                                                                    <div class="col-12" style="padding-bottom: 10px;">
                                                                        Total In Words <br />
                                                                        <span style="font-weight: bold;">@Html.DisplayFor(model => model.SaleQuotationHeaderSearch.AmtInWord)</span>
                                                                    </div>
                                                                </div>

                                                                <div class="row">
                                                                    <div class="col-12" style="margin-top:0px; font-size: 12px;">
                                                                        Notes :-<br />
                                                                        <span># Time of delivery: 7 week(Time Line starts from the receiving 100% advance Payment)</span><br />
                                                                        <span># Frieght: To Pay, #Dispatch, By Road, #Packing: included.</span><br />
                                                                        <span># Destination : Ex- Factory, # Mode/Terms Of Payment-Advance: 100% against PO, #Traveling/FOOD/Expense: at you side</span>
                                                                    </div>
                                                                </div>

                                                                <div class="row">
                                                                    <div class="col-12" style="margin-top:10px; font-size: 12px;">
                                                                        Bank Name : <span>@Html.DisplayFor(model => Model.Company.branch_bank_name)</span><br />
                                                                        Branch : <span>@Html.DisplayFor(model => Model.Company.branch_name)</span><br />
                                                                        IFSC Code : <span>@Html.DisplayFor(model => Model.Company.IFSC)</span><br />
                                                                        AC No : <span>@Html.DisplayFor(model => Model.Company.bank_ac_no)</span><br />
                                                                        Swift Code : <span>@Html.DisplayFor(model => Model.Company.MICR)</span><br />
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-5">
                                                                <div class="row">
                                                                        <div class="col-12" style="border-left:1px solid black">
                                                                            @if (cgstamt != 0)
                                                                            {
                                                                                <div class="row">
                                                                                    <div class="col-6" style="text-align: right; padding-top: 10px;">
                                                                                        Cgst(%)
                                                                                    </div>

                                                                                    <div class="col-6" style="text-align: right; padding-top: 10px;">
                                                                                        @string.Format("{0:N2}", cgstamt)
                                                                                    </div>
                                                                                </div>
                                                                            }
                                                                            @if (sgstamt != 0)
                                                                            {
                                                                                <div class="row">
                                                                                    <div class="col-6" style="text-align: right;">
                                                                                        Sgst(%)
                                                                                    </div>

                                                                                    <div class="col-6" style="text-align: right;">
                                                                                        @string.Format("{0:N2}", sgstamt)
                                                                                    </div>
                                                                                </div>
                                                                            }
                                                                            @if (igstamt != 0)
                                                                            {
                                                                                <div class="row">
                                                                                    <div class="col-6" style="text-align: right; padding-top: 10px;">
                                                                                        Igst(%)
                                                                                    </div>

                                                                                    <div class="col-6" style="text-align: right; padding-top: 10px;">
                                                                                        @string.Format("{0:N2}", igstamt)
                                                                                    </div>
                                                                                </div>
                                                                            }

                                                                            <div class="row">
                                                                                <div class="col-6" style="text-align: right; padding-top: 10px;">
                                                                                    Sub Total
                                                                                </div>
                                                                                <div class="col-6" style="text-align: right; padding-top: 10px;">
                                                                                    @string.Format("{0:N2}", Subtotal)
                                                                                </div>
                                                                            </div>


                                                                            <div class="row" style="border-top:1px solid black;">
                                                                                <div class="col-6" style="text-align: right; font-weight: bold;">
                                                                                    Total
                                                                                </div>

                                                                                <div class="col-6" style="text-align: right; font-weight: bold;">
                                                                                    @if (Model.SaleQuotationHeaderSearch != null)
                                                                                    {
                                                                                        string.Format("{0:N2}", Model.SaleQuotationHeaderSearch.total_amount);
                                                                                    }
                                                                                </div>
                                                                            </div>

                                                                            <div class="row" style="border-top:1px solid black; border-bottom:1px solid black;">
                                                                                <div class="col-12" style="margin-top:20px; text-align: center;">
                                                                                    <span style="font-weight: bold;">For :- @Html.DisplayFor(model => Model.Company.company_name)</span>
                                                                                    <br />
                                                                                    <img src="~/assets/images/Stamp.png" alt="Stamp" title="Stamp" height="90">
                                                                                    <br /><br />
                                                                                    Authorised Signature
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                            </div>
                                                        </div>

                                                        <div class="row mb-1">
                                                            <div class="col-12" style="margin-top:10px;">
                                                                Terms and Conditions :-<br />
                                                                <span style="font-size: 12px;">Declaration: We declare that the invoce shows the actual price of goods described and that all perticuler are true. Order once placed cannot be cancelled. Subject to Nagpur jurisdictiion only.</span><br />
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        function AjFunction(GSTStatus) {
            if (GSTStatus === "Within State Supplier") {
                $('#SaleQuotation tr th[colspan]:nth-child(9)').show();
                $('#SaleQuotation tr th[id="cgst"]:nth-child(1)').show();
                $('#SaleQuotation tr th[ id="cgstamt"]:nth-child(2)').show();
                $('#SaleQuotation td:nth-child(9)').show();
                $('#SaleQuotation td:nth-child(10)').show();

                $('#SaleQuotation tr th[colspan]:nth-child(10)').show();
                $('#SaleQuotation tr th[id="sgst"]:nth-child(3)').show();
                $('#SaleQuotation tr th[ id="sgstamt"]:nth-child(4)').show();
                $('#SaleQuotation td:nth-child(11)').show();
                $('#SaleQuotation td:nth-child(12)').show();

                $('#SaleQuotation tr th[colspan]:nth-child(11)').hide();
                $('#SaleQuotation tr th[id="igst"]:nth-child(5)').hide();
                $('#SaleQuotation tr th[ id="igstamt"]:nth-child(6)').hide();
                $('#SaleQuotation td:nth-child(13)').hide();
                $('#SaleQuotation td:nth-child(14)').hide();

            } else if (GSTStatus === "Out of State Supplier") {
                $('#SaleQuotation tr th[colspan]:nth-child(9)').hide();
                $('#SaleQuotation tr th[id="cgst"]:nth-child(1)').hide();
                $('#SaleQuotation tr th[ id="cgstamt"]:nth-child(2)').hide();
                $('#SaleQuotation td:nth-child(9)').hide();
                $('#SaleQuotation td:nth-child(10)').hide();
                $('#SaleQuotation tr th[colspan]:nth-child(10)').hide();
                $('#SaleQuotation tr th[id="sgst"]:nth-child(3)').hide();
                $('#SaleQuotation tr th[ id="sgstamt"]:nth-child(4)').hide();
                $('#SaleQuotation td:nth-child(11)').hide();
                $('#SaleQuotation td:nth-child(12)').hide();
                $('#SaleQuotation tr th[colspan]:nth-child(11)').show();
                $('#SaleQuotation tr th[id="igst"]:nth-child(5)').show();
                $('#SaleQuotation tr th[ id="igstamt"]:nth-child(6)').show();
                $('#SaleQuotation td:nth-child(13)').show();
                $('#SaleQuotation td:nth-child(14)').show();
            }
        }

        $(document).ready(function () {
            $("#SaleQuotationHeaderSearch_PartyId").change(function () {
                var selectedText = $(this).find("option:selected").text();
                var selectedValue = $(this).val();

                var lsParameter = {
                    PartyId: selectedValue,
                    PartyName: selectedText
                };
                $.ajax({
                    type: "POST",
                    url: "/PurchaseOrder/PartyDetail",
                    data: JSON.stringify(lsParameter),
                    contentType: 'application/json; charset=utf-8',
                    success: function (data) {
                        PartyCode = data.msg.split("|")[0];
                        PartyAddress = data.msg.split("|")[1];
                        GSTStatus = data.msg.split("|")[2];
                        AjFunction(GSTStatus); // Call the AjFunction with GSTStatus
                    },
                    error: function () {
                        alert("Error occured!!")
                    }
                });
            })
        })

        $(document).ready(function () {
            var selectedText = $("#SaleQuotationHeaderSearch_PartyId").find("option:selected").text();
            var selectedValue = $("#SaleQuotationHeaderSearch_PartyId").val();

            var lsParameter = {
                PartyId: selectedValue,
                PartyName: selectedText
            };
            $.ajax({
                type: "POST",
                url: "/PurchaseOrder/PartyDetail",
                data: JSON.stringify(lsParameter),
                contentType: 'application/json; charset=utf-8',
                success: function (data) {
                    PartyCode = data.msg.split("|")[0];
                    PartyAddress = data.msg.split("|")[1];
                    GSTStatus = data.msg.split("|")[2];
                    AjFunction(GSTStatus); // Call the AjFunction with GSTStatus
                },
                error: function () {

                }
            });
        })
    </script>
</body>
</html>
@*@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script>
        function AjFunction(GSTStatus) {
            if (GSTStatus === "Within State Supplier") {
                $('#SaleQuotation tr th[colspan]:nth-child(9)').show();
                $('#SaleQuotation tr th[id="cgst"]:nth-child(1)').show();
                $('#SaleQuotation tr th[ id="cgstamt"]:nth-child(2)').show();
                $('#SaleQuotation td:nth-child(9)').show();
                $('#SaleQuotation td:nth-child(10)').show();

                $('#SaleQuotation tr th[colspan]:nth-child(10)').show();
                $('#SaleQuotation tr th[id="sgst"]:nth-child(3)').show();
                $('#SaleQuotation tr th[ id="sgstamt"]:nth-child(4)').show();
                $('#SaleQuotation td:nth-child(11)').show();
                $('#SaleQuotation td:nth-child(12)').show();

                $('#SaleQuotation tr th[colspan]:nth-child(11)').hide();
                $('#SaleQuotation tr th[id="igst"]:nth-child(5)').hide();
                $('#SaleQuotation tr th[ id="igstamt"]:nth-child(6)').hide();
                $('#SaleQuotation td:nth-child(13)').hide();
                $('#SaleQuotation td:nth-child(14)').hide();

            } else if (GSTStatus === "Out of State Supplier") {
                $('#SaleQuotation tr th[colspan]:nth-child(9)').hide();
                $('#SaleQuotation tr th[id="cgst"]:nth-child(1)').hide();
                $('#SaleQuotation tr th[ id="cgstamt"]:nth-child(2)').hide();
                $('#SaleQuotation td:nth-child(9)').hide();
                $('#SaleQuotation td:nth-child(10)').hide();
                $('#SaleQuotation tr th[colspan]:nth-child(10)').hide();
                $('#SaleQuotation tr th[id="sgst"]:nth-child(3)').hide();
                $('#SaleQuotation tr th[ id="sgstamt"]:nth-child(4)').hide();
                $('#SaleQuotation td:nth-child(11)').hide();
                $('#SaleQuotation td:nth-child(12)').hide();
                $('#SaleQuotation tr th[colspan]:nth-child(11)').show();
                $('#SaleQuotation tr th[id="igst"]:nth-child(5)').show();
                $('#SaleQuotation tr th[ id="igstamt"]:nth-child(6)').show();
                $('#SaleQuotation td:nth-child(13)').show();
                $('#SaleQuotation td:nth-child(14)').show();
            }
        }

        $(document).ready(function () {
            $("#SaleQuotationHeaderSearch_PartyId").change(function () {
                var selectedText = $(this).find("option:selected").text();
                var selectedValue = $(this).val();

                var lsParameter = {
                    PartyId: selectedValue,
                    PartyName: selectedText
                };
                $.ajax({
                    type: "POST",
                    url: "/PurchaseOrder/PartyDetail",
                    data: JSON.stringify(lsParameter),
                    contentType: 'application/json; charset=utf-8',
                    success: function (data) {
                        PartyCode = data.msg.split("|")[0];
                        PartyAddress = data.msg.split("|")[1];
                        GSTStatus = data.msg.split("|")[2];
                        AjFunction(GSTStatus); // Call the AjFunction with GSTStatus
                    },
                    error: function () {
                        alert("Error occured!!")
                    }
                });
            })
        })

        $(document).ready(function () {
            var selectedText = $("#SaleQuotationHeaderSearch_PartyId").find("option:selected").text();
            var selectedValue = $("#SaleQuotationHeaderSearch_PartyId").val();

            var lsParameter = {
                PartyId: selectedValue,
                PartyName: selectedText
            };
            $.ajax({
                type: "POST",
                url: "/PurchaseOrder/PartyDetail",
                data: JSON.stringify(lsParameter),
                contentType: 'application/json; charset=utf-8',
                success: function (data) {
                    PartyCode = data.msg.split("|")[0];
                    PartyAddress = data.msg.split("|")[1];
                    GSTStatus = data.msg.split("|")[2];
                    AjFunction(GSTStatus); // Call the AjFunction with GSTStatus
                },
                error: function () {

                }
            });
        })
    </script>
}*@