@model ProBillInvoice.StStockHeader_StockPostingModel

@{
    ViewBag.Title = "BulkEdit";
}

@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()

<div class="form-horizontal"> 
    <div class="row">
        <div class="col-md-12">
            <div class="card">
                <div class="card-header">
                    <div class="row">
                        <div class="col-sm-6">
                            <h4 class="card-title mb-0 page-heading-color">Stock Opening - BulkEdit </h4>
                        </div>
                    </div>
                </div>

                <div class="card-body">
                    <div class="search-panel-custom1 mb-0 searh-p-c-laptop">
                        <div class="row">
                            <div class="col-md-2">
                                @*@Html.LabelFor(Model => Model.StStockHeaderSearch.SiteId, new { @class = "form-label", @style = "" })*@
                                @Html.DropDownListFor(Model => Model.StStockHeaderSearch.SiteId, (SelectList)ViewBag.SiteList, new { @class = "form-select", @style = "", @title = "Select Site Name" })
                            </div>
                            <div class="col-md-2">
                                @*@Html.LabelFor(Model => Model.StStockHeaderSearch.MaterialId, new { @class = "form-label", @style = "" })*@
                                @Html.DropDownListFor(Model => Model.StStockHeaderSearch.MaterialId, (SelectList)ViewBag.MaterialList, "--Material Name--", new { @class = "form-select", @style = "", @title = "Select Material Name" })
                            </div>
                            <div class="col-md-2">
                                @*@Html.LabelFor(Model => Model.StStockHeaderSearch.StoreId, new { @class = "form-label", @style = "" })*@
                                @Html.DropDownListFor(Model => Model.StStockHeaderSearch.StoreId, (SelectList)ViewBag.StoreList, "--Store Name--", new { @class = "form-select", @style = "" , @title = "Select Store Name" })
                            </div>
                            <div class="col-md-2">
                                @*@Html.LabelFor(Model => Model.StStockHeaderSearch.RackId, new { @class = "form-label", @style = "" })*@
                                @Html.DropDownListFor(Model => Model.StStockHeaderSearch.RackId, (SelectList)ViewBag.RackList, "--Rack Name--", new { @class = "form-select", @style = "", @title = "Select Rack Name" })
                            </div>
                            <div class="col-md-4">
                                <div class="add-create-btn" style="position: initial;">
                                    <button type="submit" id="btnAdd" class="btn btn-primary addMembers-modal" name="btnAdd" value="Add"  title="Click here to search"><div style="float: left;"><i class="ri-search-2-line fs-16 me-2"></i></div>Search</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="row mb-2">
                            <fieldset>
                                <div class="table-responsive" style="height: 400px;">
                                    <table id="StockHeader" class="table table-bordered table-hover table-responsive table-striped align-middle table-rmc table-sm" style="width:100%">
                                        <thead>
                                            <tr>
                                                <th>Item Name</th>
                                                <th>Unit</th>
                                                <th>Site Name</th>
                                                <th>Store Name</th>
                                                <th>Rack Name</th>
                                                <th style="text-align:right">Op Qty</th>
                                                <th style="text-align:right">Rate</th>
                                            </tr>
                                        </thead>

                                        @if (Model.StStockHeader != null)
                                        {
                                            for (var i = 0; i < Model.StStockHeader.Count(); i++)
                                            {
                                                <tr>
                                                    <td>@Html.DisplayFor(x => Model.StStockHeader[i].material_name)</td>
                                                    <td>@Html.DisplayFor(x => Model.StStockHeader[i].short_desc)</td>
                                                    <td>@Html.DisplayFor(x => Model.StStockHeader[i].site_name)</td>
                                                    <td>@Html.DropDownListFor(x => Model.StStockHeader[i].store_id, new SelectList(ViewBag.StoreList, "Value", "Text", Model.StStockHeader[i].store_id), "--Select--", new { @class = "form-select" })</td>
                                                    <td>@Html.DropDownListFor(x => Model.StStockHeader[i].rack_id, new SelectList(ViewBag.RackList, "Value", "Text", Model.StStockHeader[i].rack_id), "--Select--", new { @class = "form-select" })</td>
                                                    <td style="width: 150px;">@Html.TextBoxFor(x => Model.StStockHeader[i].opening_qty, new { @class = "form-control", @style = "text-align: right; color: #653eaa;" })</td>
                                                    <td style="width: 150px;">@Html.TextBoxFor(x => Model.StStockHeader[i].item_avg_rate, new { @class = "form-control", @style = "text-align: right; color: #619b1c;" })</td>

                                                    @Html.HiddenFor(x => Model.StStockHeader[i].st_stock_header_id)
                                                    @Html.HiddenFor(x => Model.StStockHeader[i].material_id)
                                                    @Html.HiddenFor(x => Model.StStockHeader[i].unit_code)
                                                    @Html.HiddenFor(x => Model.StStockHeader[i].brand_id)
                                                    @Html.HiddenFor(x => Model.StStockHeader[i].site_id)
                                                    @Html.HiddenFor(x => Model.StStockHeader[i].rack_id)
                                                    @Html.HiddenFor(x => Model.StStockHeader[i].store_id)

                                                </tr>
                                            }
                                        }
                                    </table>

                                </div>
                            </fieldset>
                        </div>

                        <div class="bottom-save-cancel-btn">
                            <div class="row">
                                <div class="col-sm-6">
                                </div>
                                <div class="col-sm-6">
                                    <a href="@Url.Action("Index", "StockPosting")" class="back-btn"  title="Click here to Back"><i class="las la-arrow-circle-left"></i>Back</a>
                                    <button type="submit" id="btnAdd" class="save-data-btn" name="btnAdd" value="Save"  title="Click here to save" onclick="return Validation();"><i class="ri-save-line"></i>Save</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
}

@if (ViewBag.Message != null)
{
    <script>
        window.onload = function () {
            Swal.fire({
                title: "<span style='color: #3085d6;'>@Html.Raw(ViewBag.Message)</span>",
                icon: "success",
                iconColor: "#04AA6D",
                confirmButtonClass: "w-xs me-2 mt-2",
                confirmButtonColor: "#3085d6",

            }).then((result) => {
                if (result.value) {
                    window.location.href = "@Url.Action("Index", "StockPosting")";
                }
            });
        } ;
    </script>
}


@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}
