@using ProBillInvoice;
@model StStockHeader_StockPostingModel

@{
    ViewBag.Title = "Create";
    int SrNo = 0;
}

@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()
    <div class="form-horizontal">
        <div class="row">
            <div class="col-md-12">
                <div class="card">
                    <div class="card-header">
                        <h4 class="card-title mb-0 page-heading-color">Stock Opening - Edit </h4>
                    </div>

                    <div class="card-body">
                        <div class="form-group">
                            <div>
                                @Html.HiddenFor(model => model.StStockHeaderSearch.st_stock_header_id, new { htmlAttributes = new { @class = "form-control" } })
                                @Html.ValidationMessageFor(model => model.StStockHeaderSearch.st_stock_header_id, "", new { @class = "text-danger" })
                            </div>

                            <div class="row mb-2">
                                <div class="table-responsive" style="height: 400px;">
                                    <table id="StockHeader" class="table table-bordered table-hover table-responsive table-striped align-middle table-rmc table-sm" style="width:100%">
                                        <thead>
                                            <tr>
                                                <th>Item Name</th>
                                                <th>Unit</th>
                                                @*<th>Brand</th>*@
                                                <th>Site Name</th>
                                                <th>Store Name</th>
                                                <th>Rack Name</th>
                                                <th style="text-align:right">Op Qty</th>
                                                <th style="text-align:right">Rate</th>
                                            </tr>
                                        </thead>

                                        @if (Model.StStockHeader != null)
                                        {
                                            for (var i = 0; i < Model.StStockHeader.Count(); i++)
                                            {
                                                SrNo = SrNo + 1;
                                        <tr>
                                            <td>@Html.DropDownListFor(x => Model.StStockHeader[i].material_id, new SelectList(ViewBag.MaterialList, "Value", "Text", Model.StStockHeader[i].material_id), new { @class = "form-select", @disabled = "disabled" })</td>
                                            <td>@Html.DropDownListFor(x => Model.StStockHeader[i].unit_code, new SelectList(ViewBag.UnitList, "Value", "Text", Model.StStockHeader[i].unit_code), new { @class = "form-select", @disabled = "disabled" })</td>
                                            @*<td>@Html.DropDownListFor(x => Model.StStockHeader[i].brand_id, (SelectList)ViewBag.BrandList, new { @class = "form-select", @disabled = "disabled" })</td>*@  
                                            <td>@Html.DropDownListFor(x => Model.StStockHeader[i].site_id, new SelectList(ViewBag.SiteList, "Value", "Text", Model.StStockHeader[i].site_id),  new { @class = "form-select", @disabled = "disabled" })</td>
                                            <td>@Html.DropDownListFor(x => Model.StStockHeader[i].store_id, new SelectList(ViewBag.StoreList, "Value", "Text", Model.StStockHeader[i].store_id), new { @class = "form-select" })</td>
                                            <td>@Html.DropDownListFor(x => Model.StStockHeader[i].rack_id, new SelectList(ViewBag.RackList, "Value", "Text", Model.StStockHeader[i].rack_id),  new { @class = "form-select" })</td>
                                            <td style="width: 150px;">@Html.TextBoxFor(x => Model.StStockHeader[i].opening_qty, new { @class = "form-control", @style = "text-align: right; color: maroon" })</td>
                                            <td style="width: 150px;">@Html.TextBoxFor(x => Model.StStockHeader[i].item_avg_rate, new { @class = "form-control", @style = "text-align: right; color: green" })</td>
                                            @Html.HiddenFor(x => Model.StStockHeader[i].st_stock_header_id)
                                            @Html.HiddenFor(x => Model.StStockHeader[i].material_id)
                                            @Html.HiddenFor(x => Model.StStockHeader[i].unit_code)
                                            @*@Html.HiddenFor(x => Model.StStockHeader[i].brand_id)*@
                                            @Html.HiddenFor(x => Model.StStockHeader[i].site_id)
                                            @Html.HiddenFor(x => Model.StStockHeader[i].store_id)
                                            @Html.HiddenFor(x => Model.StStockHeader[i].rack_id)
                                        </tr>
                                            }
                                        }
                                    </table>
                                </div>
                            </div>
                                                        
                            <div class="bottom-save-cancel-btn">
                                <div class="row">
                                    <div class="col-sm-6">
                                        <a href="@Url.Action("Create", "StockPosting" )" class="refresh-btn"><i class="bx bx-rotate-right"></i>Refresh</a>
                                    </div>
                                    <div class="col-sm-6">
                                        <a href="@Url.Action("Index", "StockPosting")" class="back-btn"><i class="las la-arrow-circle-left"></i>Back</a>
                                        <button type="submit" id="btnAdd" class="save-data-btn" name="btnAdd" value="Save" onclick="return Validation();"><i class="ri-save-line"></i>Save</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
}

@if (ViewBag.Message != null)
{
    <script>
        window.onload = function () {
            Swal.fire({
                title: "<span style='color: #3085d6;'>@Html.Raw(ViewBag.Message)</span>",
                icon: "success",
                iconColor: "#04AA6D",
                confirmButtonClass: "w-xs me-2 mt-2",
                confirmButtonColor: "#3085d6",

            }).then((result) => {
                if (result.value) {
                    window.location.href = "@Url.Action("Index", "StockPosting")";
                }
            });
        } ;
    </script>
}
@if (ViewBag.Messg != null)
{
    <script>
        window.onload = function () {
            Swal.fire({

                title: "<span style='color: #3085d6;'>@Html.Raw(ViewBag.Messg)</span>",
                icon: "error",
                iconColor: "green",
                iconColor: "red",
                confirmButtonClass: "w-xs me-2 mt-2",
                confirmButtonColor: "#3085d6",

            })
        };
    </script>
}









@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}




@*<div class="row mb-2">
        <div class="col-md-4">
            <div class="row">
                <div class="col-md-4">
                    @Html.Label("Site Name", new { @class = "form-label", @style = "float: left; padding: 4px 10px 0px 0px;" })
                </div>
                <div class="col-md-8">
                    @Html.DropDownList("site_id", (SelectList)ViewBag.SiteList, "-- Select--", new { @class = "form-select form-select-sm" })
                </div>
            </div>
        </div>

        <div class="col-md-4" style="text-align: center;">
        </div>
        <div class="col-md-4">
            <div class="row">
                <div class="col-md-4">
                    @Html.Label("Material", new { @class = "form-label", @style = "float: left; padding: 4px 10px 0px 0px;" })
                </div>
                <div class="col-md-8">
                    @Html.DropDownList("material_id", (SelectList)ViewBag.MaterialList, "-- Select--", new { @class = "form-select form-select-sm" })
                </div>
            </div>
        </div>
    </div>*@


@*<fieldset style="border: 1px solid #e7dddd; border-radius: 10px; padding: 10px 10px 5px 10px; margin: 10px 0px 10px 0px;">
        <div class="row">
            <div class="col-md-3">
                <div class="row">
                    <div class="col-md-3">
                        @Html.Label("Brand", htmlAttributes: new { @style = "padding: 5px 0px 0px 0px; margin-bottom: 0px;" })
                    </div>
                    <div class="col-md-9">
                        @Html.DropDownList("brand_id", (SelectList)ViewBag.BrandList, "-- Select--", new { @class = "form-select form-select-sm" })
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="row">
                    <div class="col-md-3">
                        @Html.Label("Rack", htmlAttributes: new { @style = "padding: 5px 0px 0px 0px; margin-bottom: 0px;" })
                    </div>
                    <div class="col-md-9">
                        @Html.DropDownList("rack_id", (SelectList)ViewBag.RackList, "-- Select--", new { @class = "form-select form-select-sm" })
                    </div>
                </div>
            </div>
            <div class="col-md-2">
                <div class="row">
                    <div class="col-md-6" style="text-align: right;">
                        @Html.Label("Op Qty", htmlAttributes: new { @style = "padding: 5px 0px 0px 0px;" })
                    </div>
                    <div class="col-md-6">
                        @Html.Editor("opening_qty", new { htmlAttributes = new { @class = "form-control form-control-sm", @style = "text-align: right;", @value = "0.00", }
                })
                    </div>
                </div>
            </div>
            <div class="col-md-2">
                <div class="row">
                    <div class="col-md-4" style="text-align: right;">
                        @Html.Label("Rate", htmlAttributes: new { @style = "padding: 5px 10px 0px 0px;" })
                    </div>
                    <div class="col-md-8">
                        @Html.Editor("item_avg_rate", new { htmlAttributes = new { @class = "form-control form-control-sm", @style = "text-align: right;", @value = "0.00", }
                })
                    </div>
                </div>
            </div>
            <div class="col-md-2"></div>
        </div>

        <div class="row">
            <div class="col-md-3">
                <div class="row">
                    <div class="col-md-3">
                        @Html.Label("Unit", htmlAttributes: new { @style = "padding: 5px 0px 0px 0px; margin-bottom: 0px;" })
                    </div>
                    <div class="col-md-9">
                        @Html.DropDownList("unit_code", (SelectList)ViewBag.UnitList, "-- Select--", new { @class = "form-select form-select-sm" })
                    </div>
                </div>
            </div>

            <div class="col-md-2 text-end">
                <button type="submit" id="btnAdd" class="btn btn-primary" name="btnAdd" value="Add" onclick="return selectHoleId();" style="padding: 2px 10px 2px 10px;"><div style="float: left; padding: 0 5px 0 0;"><i class="bx bx-plus"></i></div>Add</button>
            </div>

        </div>


    </fieldset>*@